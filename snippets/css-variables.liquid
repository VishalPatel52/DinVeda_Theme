{%- liquid
  assign main_font = settings.main_font
  assign nav_font = settings.nav_font
  assign heading_font = settings.heading_font
  assign main_font_bold = main_font | font_modify: 'weight', 'bold'
  assign main_font_italic = main_font | font_modify: 'style', 'italic'
  assign main_font_bold_italic = main_font_bold | font_modify: 'style', 'italic'
%}

{% style %}

{{ main_font | font_face: font_display: 'swap' }}
{{ main_font_bold | font_face: font_display: 'swap' }}
{{ main_font_italic | font_face: font_display: 'swap' }}
{{ main_font_bold_italic | font_face: font_display: 'swap' }}
{{ heading_font | font_face: font_display: 'swap' }}
{{ nav_font | font_face: font_display: 'swap' }}

{%- liquid
  case settings.heading_spacing
    when 0
      assign heading_spacing = '0px'
    when 1
      assign heading_spacing = '0.5px'
    when 2
      assign heading_spacing = '1px'
    when 3
      assign heading_spacing = '1.5px'
    when 4
      assign heading_spacing = '2px'
    when 5
      assign heading_spacing = '2.5px'
    when 6
      assign heading_spacing = '3px'
  endcase
  case settings.nav_spacing
    when 0
      assign nav_spacing = '0px'
    when 1
      assign nav_spacing = '0.5px'
    when 2
      assign nav_spacing = '1px'
    when 3
      assign nav_spacing = '1.5px'
    when 4
      assign nav_spacing = '2px'
    when 5
      assign nav_spacing = '2.5px'
    when 6
      assign nav_spacing = '3px'
  endcase
  case settings.font_spacing
    when 0
      assign font_spacing = '0px'
    when 1
      assign font_spacing = '0.5px'
    when 2
      assign font_spacing = '1px'
    when 3
      assign font_spacing = '1.5px'
    when 4
      assign font_spacing = '2px'
    when 5
      assign font_spacing = '2.5px'
    when 6
      assign font_spacing = '3px'
  endcase
  case settings.button_spacing
    when 0
      assign buttons_spacing = '0px'
    when 1
      assign buttons_spacing = '0.5px'
    when 2
      assign buttons_spacing = '1px'
    when 3
      assign buttons_spacing = '1.5px'
    when 4
      assign buttons_spacing = '2px'
    when 5
      assign buttons_spacing = '2.5px'
    when 6
      assign buttons_spacing = '3px'
  endcase
  assign nav_transform = 'unset'
  if settings.nav_transform
    assign nav_transform = 'uppercase'
  endif
  assign button_transform = 'unset'
  if settings.button_transform
    assign button_transform = 'uppercase'
  endif

-%}

:root {
  --heading-family: {{ heading_font.family }}, {{ heading_font.fallback_families }};
  --heading-weight: {{ heading_font.weight }};
  --heading-style: {{ heading_font.style }};
  --heading-spacing: {{ heading_spacing }};
  --heading-align: {{ settings.section_title_align }};

  --main-family: {{ main_font.family }}, {{ main_font.fallback_families }};
  --main-weight: {{ main_font.weight }};
  --main-style: {{ main_font.style }};
  --main-spacing: {{ font_spacing }};

  --nav-family: {{ nav_font.family }}, {{ nav_font.fallback_families }};
  --nav-weight: {{ nav_font.weight }};
  --nav-style: {{ nav_font.style }};
  --nav-spacing: {{ nav_spacing }};
  --nav-transform: {{ nav_transform }};

  /* DinVeda Design System - Typography */
  {%- comment -%} Precedence: Design System > Original Theme Setting > Hardcoded Fallback {%- endcomment -%}
  {%- assign design_body_size = settings.design_body_font_size | default: settings.font_size | default: 16 -%}
  {%- assign design_h1_size = settings.design_h1_size | default: settings.h1_size | default: 40 -%}
  {%- assign design_h2_size = settings.design_h2_size | default: settings.h2_size | default: 28 -%}
  {%- assign design_h3_size = settings.design_h3_size | default: settings.h3_size | default: 22 -%}
  
  --design-body-font-size: {{ design_body_size }}px;
  --design-h1-size: {{ design_h1_size }}px;
  --design-h2-size: {{ design_h2_size }}px;
  --design-h3-size: {{ design_h3_size }}px;

  /* Backwards compatibility - legacy variables map to design system */
  --font-size: {{ design_body_size }}px;
  --nav-size: {{ settings.nav_size }}px;
  --h1-size: {{ design_h1_size }}px;
  --h2-size: {{ design_h2_size }}px;
  --h3-size: {{ design_h3_size }}px;

  --font-size-sm: calc({{ design_body_size }}px - 2px);
  --font-size-reset: {{ design_body_size }}px;

  /* DinVeda Design System - Buttons */
  {%- comment -%} Precedence: Design System > Original Theme Setting > Hardcoded Fallback {%- endcomment -%}
  {%- assign design_button_radius = settings.design_button_radius | default: 0 -%}
  --design-button-radius: {{ design_button_radius }}px;

  /* Backwards compatibility - legacy variables map to design system */
  --buttons-transform: {{ button_transform }};
  --buttons-border-weight: 1px;
  --buttons-corners: {{ design_button_radius }}px;
  --buttons-spacing: {{ buttons_spacing }};
  --form-border-weight: 1px;

  --slideout-desktop: 550px;
  --slideout-desktop-n: -550px;
  --slideout-mobile: 350px;
  --slideout-mobile-n: -350px;

  --keyboard-focus: {{ settings.keyboard_focus }};
  --keyboard-border-style: {{ settings.focus_border_style }};
  --keyboard-border-weight: {{ settings.focus_border_weight }}px;
  --keyboard-border-offset-weight: -{{ settings.focus_border_weight }}px;

  --scheme-1-bg: {{ settings.scheme_1_bg }};
  --scheme-1-text: {{ settings.scheme_1_text }};
  --scheme-1-hover: {{ settings.scheme_1_hover }};
  --scheme-1-button-text: {{ settings.scheme_1_button_text }};
  --scheme-1-button-bg: {{ settings.scheme_1_button_bg }};

  --scheme-2-bg: {{ settings.scheme_2_bg }};
  --scheme-2-text: {{ settings.scheme_2_text }};
  --scheme-2-hover: {{ settings.scheme_2_hover }};
  --scheme-2-button-text: {{ settings.scheme_2_button_text }};
  --scheme-2-button-bg: {{ settings.scheme_2_button_bg }};

  --scheme-3-bg-light: {{ settings.scheme_3_bg | color_lighten: 20 }};
  --scheme-3-bg: {{ settings.scheme_3_bg }};
  --scheme-3-text: {{ settings.scheme_3_text }};
  --scheme-3-hover: {{ settings.scheme_3_hover }};
  --scheme-3-button-text: {{ settings.scheme_3_button_text }};
  --scheme-3-button-bg: {{ settings.scheme_3_button_bg }};

  /* DinVeda Design System - Core Colors */
  {%- comment -%} Precedence: Design System > Original Theme Setting > Hardcoded Fallback {%- endcomment -%}
  {%- assign design_bg = settings.design_bg_color | default: settings.background | default: '#FFF0DD' -%}
  {%- assign design_secondary_bg = settings.design_secondary_bg | default: settings.secondary_bg | default: '#FFF6EA' -%}
  {%- assign design_text = settings.design_text_color | default: settings.text_color | default: '#C17129' -%}
  {%- assign design_accent = settings.design_accent_color | default: settings.text_color | color_darken: 15 | default: '#8B5A2B' -%}
  
  --design-bg-color: {{ design_bg }};
  --design-secondary-bg: {{ design_secondary_bg }};
  --design-text-color: {{ design_text }};
  --design-accent-color: {{ design_accent }};

  /* Backwards compatibility - legacy variables map to design system */
  --background: {{ design_bg }};
  --background-dark: {{ design_bg | color_darken: 20 }};
  --text-color-light: {{ design_text | color_lighten: 20 }};
  --text-color: {{ design_text }};
  --dotted-color: {{ settings.border_color }};
  --sale-color: {{ settings.sale_color }};
  --sale-color-dark: {{ settings.sale_color | color_darken: 20 }};
  --sale-color-light: {{ settings.sale_color | color_lighten: 20 }};
  --announcement-bg: {{ settings.announcement_bg }};
  --announcement-text: {{ settings.announcement_text }};
  --announcement-hover: {{ settings.announcement_hover }};
  --header-bg: {{ settings.header_bg }};
  --header-text: {{ settings.header_text }};
  --header-hover: {{ settings.header_hover }};
  --button-bg: {{ settings.button_bg }};
  --button-text: {{ settings.button_text }};
  --secondary-button-bg: {{ settings.secondary_button_bg }};
  --secondary-button-text: {{ settings.secondary_button_text }};
  --directional-bg: {{ settings.directional_bg }};
  --directional-text: {{ settings.directional_text }};
  --directional-hover: {{ settings.directional_hover }};
  --footer-bg: {{ settings.footer_bg }};
  --footer-text: {{ settings.footer_text }};
  --error-msg-dark: #BF3333;
  --error-msg-light: {{ '#BF3333' | color_lighten: 30 }};
  --success-msg-dark: {{ design_text }};
  --success-msg-light: {{ design_secondary_bg }};
  --slideshow-btn-height: 34px;
  --slideshow-btn-width: 34px;
  /* DinVeda Design System - Section Spacing */
  {%- comment -%} Precedence: Design System > Original Theme Setting > Hardcoded Fallback {%- endcomment -%}
  {%- assign design_spacing_small = settings.design_section_spacing_small | default: 40 -%}
  {%- assign design_spacing_medium = settings.design_section_spacing_medium | default: settings.section_padding | default: 70 -%}
  {%- assign design_spacing_large = settings.design_section_spacing_large | default: 110 -%}
  
  --design-section-spacing-small: {{ design_spacing_small }}px;
  --design-section-spacing-medium: {{ design_spacing_medium }}px;
  --design-section-spacing-large: {{ design_spacing_large }}px;

  /* Backwards compatibility - legacy variables map to design system */
  --masonry-padding: 20px;
  --section-padding: {{ design_spacing_medium }}px;

  --star-active: {{ design_text | color_to_rgb }};
  --star-inactive: {{ design_text | color_lighten: 30 | color_to_rgb }};

  --phone-number-text: {{ settings.phone_number_text }};
  --phone-number-background: {{ settings.phone_number_background }};
  --shop-note-text: {{ settings.shop_note_text }};
  --shop-note-background: {{ settings.shop_note_background }};
  --secondary-bg: {{ design_secondary_bg }};
  --box-shadow-color: {{ settings.box_shadow_color }};
  --prefooter-bg: {{ settings.prefooter_bg }};
  --prefooter-text: {{ settings.prefooter_text }};
  --prefooter-button-bg: {{ settings.prefooter_button_bg }};
  --prefooter-button-text: {{ settings.prefooter_button_text }};
  --age-text-color: {{ settings.age_text_color }};
  --age-bg-color: {{ settings.age_bg_color }};

  --text-color-reset: {{ design_text }};
  --background-reset: {{ design_bg }};

  --slideout-background: var(--background);
  --slideout-width: var(--slideout-desktop);
  --slideout-transition-duration: 0.2s;
  --slideout-backdrop: rgb(30, 30, 30, 0.5);
  --modal-transition-duration: 0.2s;
  --modal-timing-function: ease-in-out;
  --modal-backdrop: rgba(30, 30, 30, 0.5);
}
.ajax-cart__free-shipping {
  background-color: var(--scheme-{{ settings.free_shipping_scheme }}-bg);
  color: var(--scheme-{{ settings.free_shipping_scheme }}-text);
}
.ajax-cart__free-shipping p,
.ajax-cart__free-shipping span,
.ajax-cart__free-shipping small {
  color: var(--scheme-{{ settings.free_shipping_scheme }}-text);
}
@media (max-width: 740px) {
  :root {
    --font-size: calc({{ design_body_size }}px - ({{ design_body_size }}px * 0.15));
    --nav-size: calc({{ settings.nav_size }}px - ({{ settings.nav_size }}px * 0.15));
    --h1-size: calc({{ design_h1_size }}px - ({{ design_h1_size }}px * 0.15));
    --h2-size: calc({{ design_h2_size }}px - ({{ design_h2_size }}px * 0.15));
    --h3-size: calc({{ design_h3_size }}px - ({{ design_h3_size }}px * 0.15));
    --font-size-reset: calc({{ design_body_size }}px - ({{ design_body_size }}px * 0.15));
    --design-body-font-size: calc({{ design_body_size }}px - ({{ design_body_size }}px * 0.15));
    --design-h1-size: calc({{ design_h1_size }}px - ({{ design_h1_size }}px * 0.15));
    --design-h2-size: calc({{ design_h2_size }}px - ({{ design_h2_size }}px * 0.15));
    --design-h3-size: calc({{ design_h3_size }}px - ({{ design_h3_size }}px * 0.15));
  }
}
{% endstyle %}
