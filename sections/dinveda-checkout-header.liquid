{% comment %} DinVeda Checkout Header Section {% endcomment %}
{%- liquid
  assign show_progress = section.settings.show_progress
  if show_progress == blank
    assign show_progress = true
  endif

  assign back_to_cart_link = section.settings.back_to_cart_link
  if back_to_cart_link == blank
    assign back_to_cart_link = routes.cart_url
  endif

  assign current_step = section.settings.current_step
  if current_step == blank
    assign current_step = 'information'
  endif
-%}

<header class="dinveda-checkout-header dinveda-checkout-header-{{ section.id }}" data-section-id="{{ section.id }}">
  <div class="dinveda-checkout-header__wrapper">
    {%- comment -%} Centered Logo {%- endcomment -%}
    <div class="dinveda-checkout-header__logo-wrapper">
      <a href="{{ routes.root_url }}" class="dinveda-checkout-header__logo">
        {% if section.settings.logo != blank %}
          {{ section.settings.logo | image_url: width: 150 | image_tag: alt: shop.name, class: 'dinveda-checkout-header__logo-img' }}
        {% else %}
          <span class="dinveda-checkout-header__logo-text">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>

    {% if show_progress %}
      {%- comment -%} Breadcrumb Navigation {%- endcomment -%}
      <div class="dinveda-checkout-header__progress">
        <div class="dinveda-checkout-progress">
          <a href="{{ routes.cart_url }}" class="dinveda-checkout-progress__step dinveda-checkout-progress__step--completed">
            <span class="dinveda-checkout-progress__step-number">1</span>
            <span class="dinveda-checkout-progress__step-label">{{ 'checkout.progress.cart' | default: 'Cart' | t }}</span>
          </a>
          <span class="dinveda-checkout-progress__separator">></span>
          <div class="dinveda-checkout-progress__step dinveda-checkout-progress__step--active">
            <span class="dinveda-checkout-progress__step-number">2</span>
            <span class="dinveda-checkout-progress__step-label">{{ 'checkout.progress.checkout' | default: 'Checkout' | t }}</span>
          </div>
          <span class="dinveda-checkout-progress__separator">></span>
          <div class="dinveda-checkout-progress__step dinveda-checkout-progress__step--inactive">
            <span class="dinveda-checkout-progress__step-number">3</span>
            <span class="dinveda-checkout-progress__step-label">{{ 'checkout.progress.confirmation' | default: 'Confirmation' | t }}</span>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</header>

{% schema %}
{
  "name": "DinVeda Checkout Header",
  "tag": "section",
  "class": "dynamic-section",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo",
      "info": "Logo to display in checkout header"
    },
    {
      "type": "text",
      "id": "back_to_cart_link",
      "label": "Back to cart link",
      "default": "/cart",
      "info": "URL to redirect when 'Back to Cart' is clicked"
    },
    {
      "type": "checkbox",
      "id": "show_progress",
      "label": "Show progress indicator",
      "default": true
    },
    {
      "type": "select",
      "id": "current_step",
      "label": "Current step",
      "options": [
        {
          "value": "information",
          "label": "Information"
        },
        {
          "value": "shipping",
          "label": "Shipping"
        },
        {
          "value": "payment",
          "label": "Payment"
        }
      ],
      "default": "information"
    }
  ],
  "presets": [
    {
      "name": "DinVeda Checkout Header"
    }
  ]
}
{% endschema %}

