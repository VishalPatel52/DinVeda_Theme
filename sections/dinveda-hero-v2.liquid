{% comment %}
  DinVeda Hero V2 - Premium Minimal Hero Section
  No carousel, conversion-focused, fully configurable
{% endcomment %}

{%- liquid
  assign desktop_image = section.settings.desktop_image
  assign mobile_image = section.settings.mobile_image | default: desktop_image
  assign background_mode = section.settings.background_mode | default: 'design_bg'
  assign text_alignment = section.settings.text_alignment | default: 'left'
  assign highlight_word = section.settings.highlight_word | downcase
  assign show_trust_row = section.settings.show_trust_row
-%}

<link rel="preload" href="{{ 'section-dinveda-hero-v2.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'section-dinveda-hero-v2.css' | asset_url }}"></noscript>

<section
  id="dinveda-hero-v2-{{ section.id }}"
  class="dinveda-hero-v2"
  data-section-id="{{ section.id }}"
  data-section-type="dinveda-hero-v2"
>
  <div class="dinveda-hero-v2__container">
    <div class="dinveda-hero-v2__grid">
      
      {%- comment -%} Image Column (Left on desktop, first on mobile) {%- endcomment -%}
      <div class="dinveda-hero-v2__image-column">
        {% if desktop_image != blank %}
          <picture class="dinveda-hero-v2__picture">
            {% if mobile_image != blank and mobile_image != desktop_image %}
              <source
                media="(max-width: 767px)"
                srcset="{{ mobile_image | image_url: width: 800 }} 1x, {{ mobile_image | image_url: width: 1600 }} 2x"
              >
            {% endif %}
            <img
              src="{{ desktop_image | image_url: width: 1200 }}"
              srcset="{{ desktop_image | image_url: width: 1200 }} 1x, {{ desktop_image | image_url: width: 2400 }} 2x"
              alt="{{ desktop_image.alt | escape }}"
              class="dinveda-hero-v2__image"
              loading="eager"
              fetchpriority="high"
              width="{{ desktop_image.width }}"
              height="{{ desktop_image.height }}"
            >
          </picture>
        {% else %}
          <div class="dinveda-hero-v2__placeholder">
            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        {% endif %}
      </div>

      {%- comment -%} Text Column (Right on desktop, second on mobile) {%- endcomment -%}
      <div class="dinveda-hero-v2__text-column dinveda-hero-v2__text-column--{{ text_alignment }}">
        <div class="dinveda-hero-v2__content">
          
          {%- comment -%} Eyebrow {%- endcomment -%}
          {% if section.settings.eyebrow != blank %}
            <p class="dinveda-hero-v2__eyebrow">{{ section.settings.eyebrow | escape }}</p>
          {% endif %}

          {%- comment -%} Headline with optional highlight {%- endcomment -%}
          {% if section.settings.headline != blank %}
            <h1 class="dinveda-hero-v2__headline">
              {% if highlight_word != blank %}
                {% assign headline_words = section.settings.headline | split: ' ' %}
                {% for word in headline_words %}
                  {% assign word_clean = word | downcase | replace: '.', '' | replace: ',', '' | replace: '!', '' | replace: '?', '' | replace: ':', '' | replace: ';', '' %}
                  {% if word_clean == highlight_word %}
                    <span class="dinveda-hero-v2__highlight">{{ word }}</span>
                  {% else %}
                    {{ word }}
                  {% endif %}
                  {% unless forloop.last %} {% endunless %}
                {% endfor %}
              {% else %}
                {{ section.settings.headline }}
              {% endif %}
            </h1>
          {% endif %}

          {%- comment -%} Subheadline {%- endcomment -%}
          {% if section.settings.subheadline != blank %}
            <p class="dinveda-hero-v2__subheadline">{{ section.settings.subheadline | escape }}</p>
          {% endif %}

          {%- comment -%} CTAs {%- endcomment -%}
          <div class="dinveda-hero-v2__buttons">
            {% if section.settings.primary_cta_label != blank and section.settings.primary_cta_link != blank %}
              <a
                href="{{ section.settings.primary_cta_link }}"
                class="dinveda-hero-v2__button dinveda-hero-v2__button--primary button btn-outline"
              >
                {{ section.settings.primary_cta_label | escape }}
              </a>
            {% endif %}

            {% if section.settings.secondary_cta_label != blank and section.settings.secondary_cta_link != blank %}
              <a
                href="{{ section.settings.secondary_cta_link }}"
                class="dinveda-hero-v2__button dinveda-hero-v2__button--secondary button btn-outline btn-secondary"
              >
                {{ section.settings.secondary_cta_label | escape }}
              </a>
            {% endif %}
          </div>

          {%- comment -%} Trust Row {%- endcomment -%}
          {% if show_trust_row and section.blocks.size > 0 %}
            <div class="dinveda-hero-v2__trust-row">
              {% for block in section.blocks %}
                {% if block.type == 'trust_item' %}
                  <div class="dinveda-hero-v2__trust-item" {{ block.shopify_attributes }}>
                    {% if block.settings.icon_image != blank %}
                      {%- liquid
                        assign trust_alt = block.settings.text | default: block.settings.icon_image.alt | default: 'Trust indicator'
                        assign trust_alt_escaped = trust_alt | escape
                      -%}
                      <div class="dinveda-hero-v2__trust-icon">
                        {{ block.settings.icon_image | image_url: width: 48 | image_tag: alt: trust_alt_escaped, loading: 'lazy' }}
                      </div>
                    {% endif %}
                    {% if block.settings.text != blank %}
                      <p class="dinveda-hero-v2__trust-text">{{ block.settings.text | escape }}</p>
                    {% endif %}
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endif %}

        </div>
      </div>

    </div>
  </div>
</section>

{% style %}
  #dinveda-hero-v2-{{ section.id }} {
    {% case background_mode %}
      {% when 'design_bg' %}
        background-color: var(--design-bg-color);
      {% when 'design_secondary_bg' %}
        background-color: var(--design-secondary-bg);
      {% when 'transparent' %}
        background-color: transparent;
    {% endcase %}
  }
{% endstyle %}

{% schema %}
{
  "name": "DinVeda Hero V2",
  "tag": "section",
  "class": "dynamic-section",
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop image",
      "info": "Recommended: 1200x800px or similar ratio"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile image (optional)",
      "info": "If not set, desktop image will be used. Recommended: 800x1000px or similar ratio"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text (optional)",
      "default": "Premium Quality"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Bio-ayurvedische Ritualmischungen"
    },
    {
      "type": "text",
      "id": "highlight_word",
      "label": "Word to highlight",
      "info": "Enter a single word from the headline to highlight with accent color",
      "default": "Ritualmischungen"
    },
    {
      "type": "textarea",
      "id": "subheadline",
      "label": "Subheadline (optional)",
      "info": "Max 2 lines recommended",
      "default": "Für Morgenwärme, goldene Pausen und Abendruhe."
    },
    {
      "type": "header",
      "content": "Call-to-Action Buttons"
    },
    {
      "type": "text",
      "id": "primary_cta_label",
      "label": "Primary button label",
      "default": "Alle Mischungen entdecken"
    },
    {
      "type": "url",
      "id": "primary_cta_link",
      "label": "Primary button link"
    },
    {
      "type": "text",
      "id": "secondary_cta_label",
      "label": "Secondary button label (optional)",
      "default": "Unser Ritual-Prinzip"
    },
    {
      "type": "url",
      "id": "secondary_cta_link",
      "label": "Secondary button link (optional)",
      "info": "Link to 'Our Story' page"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "background_mode",
      "label": "Background color",
      "options": [
        {
          "value": "design_bg",
          "label": "Design System Background"
        },
        {
          "value": "design_secondary_bg",
          "label": "Design System Secondary Background"
        },
        {
          "value": "transparent",
          "label": "Transparent"
        }
      ],
      "default": "design_bg"
    },
    {
      "type": "header",
      "content": "Trust Row"
    },
    {
      "type": "checkbox",
      "id": "show_trust_row",
      "label": "Show trust row",
      "default": true,
      "info": "Display trust indicators below buttons"
    }
  ],
  "blocks": [
    {
      "type": "trust_item",
      "name": "Trust item",
      "limit": 3,
      "settings": [
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon image (optional)",
          "info": "Recommended: 48x48px square icon"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "EU-BIO Certified"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "DinVeda Hero V2",
      "blocks": [
        {
          "type": "trust_item",
          "settings": {
            "text": "EU-BIO Certified"
          }
        },
        {
          "type": "trust_item",
          "settings": {
            "text": "Made in Germany"
          }
        },
        {
          "type": "trust_item",
          "settings": {
            "text": "100% Natural"
          }
        }
      ]
    }
  ]
}
{% endschema %}

